<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AniPick Admin â€“ ë²„ì „ ê´€ë¦¬</title>

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #50C8B8;
      --primary-light: #6dd4c7;
      --text-primary: #1f2937;
      --bg-page: #f5f6f8;
      --bg-card: #ffffff;
      --border-light: #e5e7eb;
      --shadow-medium: 0 10px 30px rgba(0,0,0,0.12);
      --radius: 16px;
      --transition: all .25s ease;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: "Noto Sans KR", sans-serif; background: var(--bg-page); }

    header {
      position: fixed; inset: 0 0 auto 0; height: 64px;
      background: white; border-bottom: 1px solid rgba(0,0,0,0.06);
      z-index: 20;
    }

    .header-container {
      max-width: 1100px; margin: 0 auto; padding: 0 20px;
      height: 100%; display: flex; align-items: center; justify-content: space-between;
    }

    .logo { display: flex; align-items: center; gap: 10px; font-weight: 900; color: var(--text-primary); text-decoration: none; }
    .logo img { width: 32px; }

    .menu-btn {
      width: 32px; height: 22px; background: none; border: none;
      display: flex; flex-direction: column; justify-content: space-between; cursor: pointer;
    }
    .menu-btn span { height: 3px; background: var(--text-primary); border-radius: 2px; }

    .menu-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.45);
      opacity: 0; visibility: hidden; transition: var(--transition); z-index: 30;
    }
    .menu-overlay.show { opacity: 1; visibility: visible; }

    .side-menu {
      position: fixed; top: 0; right: -280px; width: 280px; height: 100%;
      background: white; padding: 24px;
      box-shadow: -10px 0 30px rgba(0,0,0,0.15);
      transition: var(--transition); z-index: 40;
    }
    .side-menu.show { right: 0; }

    .admin-container {
      max-width: 900px; margin: 120px auto;
      background: var(--bg-card); padding: 36px;
      border-radius: var(--radius); box-shadow: var(--shadow-medium);
    }

    .tab-bar { display: flex; gap: 10px; margin-bottom: 32px; }
    .tab {
      padding: 10px 18px; border-radius: 999px; border: 1px solid var(--border-light);
      cursor: pointer; font-weight: 800; background: white;
    }
    .tab.active {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white; border: none;
    }

    .admin-title { font-size: 26px; font-weight: 900; margin-bottom: 32px; }

    .form-group { margin-bottom: 22px; }
    label { font-weight: 700; display: block; margin-bottom: 8px; }

    input, textarea {
      width: 100%; padding: 12px;
      border-radius: 10px; border: 1px solid var(--border-light);
    }

    .version-row { display: flex; gap: 10px; align-items: center; }
    .version-row input { width: 80px; text-align: center; }
    .version-row span { font-weight: 900; }

    .btn-group { display: flex; gap: 10px; }
    .btn {
      padding: 10px 18px; border-radius: 999px;
      border: 1px solid var(--border-light); background: white; cursor: pointer;
    }
    .btn.active {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white; border: none;
    }

    .submit-btn {
      margin-top: 32px; width: 100%; padding: 16px;
      border-radius: 14px; border: none;
      font-size: 16px; font-weight: 800;
      color: white; background: linear-gradient(135deg, var(--primary), var(--primary-light));
      cursor: pointer;
    }

    .version-list { margin-top: 24px; border-top: 1px solid var(--border-light); }
    .version-item {
      padding: 14px; border-bottom: 1px solid var(--border-light);
      cursor: pointer;
    }
    .version-item:hover { background: rgba(0,0,0,0.04); }

    .hidden { display: none; }

    /* ---------- DETAIL MODAL ---------- */
    .detail-modal {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 520px; max-height: 80vh; overflow-y: auto;
      background: white; padding: 28px;
      border-radius: 16px; z-index: 50;
      box-shadow: var(--shadow-medium);
      display: none;
    }
    .detail-modal.show { display: block; }

    .danger {
      background: #ef4444; color: white; border: none;
    }
  </style>
</head>

<body>

<script>
  const adminAccessToken = sessionStorage.getItem("ADMIN_ACCESS_TOKEN");
  if (!adminAccessToken) {
    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    location.href = "/admin-login.html";
  }

  let selectedPlatform = "ANDROID";
  let selectedImportantYn = 1;
  let selectedType = "update";
</script>

<header>
  <div class="header-container">
    <a class="logo" href="/admin-version.html">
      <img src="/image/anipick_logo.png"> AniPick Admin
    </a>
    <button id="menuBtn" class="menu-btn">
      <span></span><span></span><span></span>
    </button>
  </div>
</header>

<div id="overlay" class="menu-overlay"></div>
<div id="sideMenu" class="side-menu">
  <h3>ê´€ë¦¬ì ë©”ë‰´</h3>
  <a href="/admin-version.html">ğŸ›  ë²„ì „ ê´€ë¦¬</a>
</div>

<div class="admin-container">

  <!-- TAB -->
  <div class="tab-bar">
    <div id="tabCreate" class="tab active">ë²„ì „ ë“±ë¡</div>
    <div id="tabList" class="tab">ë²„ì „ ì¡°íšŒ</div>
  </div>

  <section id="createSection">
    <h1 class="admin-title">ë²„ì „ ë“±ë¡</h1>

    <div class="form-group">
      <label>í”Œë«í¼</label>
      <div class="btn-group" id="platformBtns">
        <button class="btn active">ANDROID</button>
        <button class="btn">IOS</button>
      </div>
    </div>

    <div class="form-group">
      <label>ë²„ì „</label>
      <div class="version-row">
        <input id="major" type="number" min="0" required placeholder="0">
        <span>.</span>
        <input id="minor" type="number" min="0" required placeholder="0">
        <span>.</span>
        <input id="patch" type="number" min="0" required placeholder="0">
      </div>
    </div>

    <div class="form-group">
      <label>í•„ìˆ˜ ì—¬ë¶€</label>
      <div class="btn-group" id="importantBtns">
        <button class="btn active">í•„ìˆ˜</button>
        <button class="btn">ì„ íƒ</button>
      </div>
    </div>

    <div class="form-group">
      <label>íƒ€ì…</label>
      <div class="btn-group" id="typeBtns">
        <button class="btn active">ì—…ë°ì´íŠ¸</button>
        <button class="btn">ê³µì§€ì‚¬í•­</button>
      </div>
    </div>

    <div class="form-group">
      <label>URL</label>
      <input id="url" required placeholder="https://...">
    </div>

    <div class="form-group">
      <label>ì œëª©</label>
      <input id="title" required>
    </div>

    <div class="form-group">
      <label>ë‚´ìš©</label>
      <textarea id="content" rows="5" required></textarea>
    </div>

    <button id="submitBtn" class="submit-btn">ë²„ì „ ë“±ë¡</button>
  </section>

  <section id="listSection" class="hidden">
    <h1 class="admin-title">ë²„ì „ ì¡°íšŒ</h1>

    <div class="form-group">
      <label>í”Œë«í¼ (í•„ìˆ˜)</label>
      <div class="btn-group">
        <button class="btn active">ANDROID</button>
        <button class="btn">IOS</button>
      </div>
    </div>

    <div class="form-group">
      <label>íƒ€ì… (ì„ íƒ)</label>
      <div class="btn-group">
        <button class="btn active">ì „ì²´</button>
        <button class="btn">ì—…ë°ì´íŠ¸</button>
        <button class="btn">ê³µì§€ì‚¬í•­</button>
      </div>
    </div>

    <button class="submit-btn">ì¡°íšŒ</button>

    <div class="version-list">
      <div class="version-item">v1.0.2 Â· update Â· 2025-12-12</div>
      <div class="version-item">v1.0.1 Â· notice Â· 2025-12-01</div>
    </div>
  </section>

</div>

<div id="detailOverlay" class="menu-overlay"></div>
<div id="detailModal" class="detail-modal">
  <h3>ë²„ì „ ìƒì„¸</h3>

  <div class="form-group"><label>ë²„ì „</label><input readonly value="1.0.2"></div>
  <div class="form-group"><label>íƒ€ì…</label><input readonly value="update"></div>
  <div class="form-group"><label>ì œëª©</label><input readonly value="ì œëª©..."></div>
  <div class="form-group"><label>ë‚´ìš©</label><textarea rows="4" readonly>ë‚´ìš©...</textarea></div>

  <div class="btn-group">
    <button class="btn">ìˆ˜ì •</button>
    <button class="btn danger">ì‚­ì œ</button>
  </div>
</div>

<script>
  document.querySelectorAll(".version-item").forEach(item => {
    item.onclick = () => {
      detailOverlay.classList.add("show");
      detailModal.classList.add("show");
    };
  });

  detailOverlay.onclick = () => {
    detailOverlay.classList.remove("show");
    detailModal.classList.remove("show");
  };
</script>

<script>
  const toggle = (group, cb) => {
    group.querySelectorAll(".btn").forEach(btn => {
      btn.onclick = () => {
        group.querySelectorAll(".btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        cb(btn.innerText.trim());
      };
    });
  };

  toggle(platformBtns, v => selectedPlatform = v);
  toggle(importantBtns, v => selectedImportantYn = v === "í•„ìˆ˜" ? 1 : 0);
  toggle(typeBtns, v => selectedType = v === "ì—…ë°ì´íŠ¸" ? "update" : "notice");

  submitBtn.onclick = async () => {
    const payload = {
      platform: selectedPlatform,
      major: Number(major.value),
      minor: Number(minor.value),
      patch: Number(patch.value),
      importantYn: selectedImportantYn,
      type: selectedType,
      url: url.value,
      title: title.value,
      updatedContent: content.value
    };

    // TODO: API ì—°ë™
    alert("ë²„ì „ ë“±ë¡ (API ì—°ë™ ì „)");
  };

  const tabCreate = document.getElementById("tabCreate");
  const tabList = document.getElementById("tabList");
  const createSection = document.getElementById("createSection");
  const listSection = document.getElementById("listSection");

  tabCreate.onclick = () => {
    tabCreate.classList.add("active");
    tabList.classList.remove("active");
    createSection.classList.remove("hidden");
    listSection.classList.add("hidden");
  };

  tabList.onclick = () => {
    tabList.classList.add("active");
    tabCreate.classList.remove("active");
    listSection.classList.remove("hidden");
    createSection.classList.add("hidden");
  };

  menuBtn.onclick = () => {
    sideMenu.classList.add("show");
    overlay.classList.add("show");
  };

  overlay.onclick = () => {
    sideMenu.classList.remove("show");
    overlay.classList.remove("show");
  };
</script>

</body>
</html>
